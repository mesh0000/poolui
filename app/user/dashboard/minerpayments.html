<md-dialog aria-label="Mango (Fruit)">
  <form ng-cloak>
    <md-toolbar>
      <div class="md-toolbar-tools">
        <span class="md-title">Payment History</span>
        <span flex></span>
        <md-button class="md-icon-button" ng-click="answer('close')">
          <md-icon aria-label="Close dialog">clear</md-icon>
        </md-button>
      </div>
    </md-toolbar>
    <md-subheader>
    	<p>To : <b class="truncate">{{addr}}</b></p>
    </md-subheader>
    <md-dialog-content>
    	<md-table-pagination md-limit="options.limit" md-limit-options="[10, 20, 30]" md-page="options.page" md-total="{{miner.txnCount}}" md-on-paginate="loadPayments" md-page-select></md-table-pagination>
      	<md-table-container>
			<table md-table md-row-select ng-model="selected" md-progress="promise">
			<thead md-head>
			  <tr md-row>
			  	<th md-column md-numeric><h2 class="md-subhead">Time</h2></th>
				<th md-column md-numeric><h2 class="md-subhead">Type</h2></th>
				<th md-column md-numeric><h2 class="md-subhead">Amount</h2></th>
				<th md-column md-numeric><h2 class="md-subhead">Txn Hash</h2></th>
				<th md-column md-numeric><h2 class="md-subhead">Mixins</h2></th>
			  </tr>
			</thead>
			<tbody md-body>
			  <tr md-row ng-repeat="payment in payments">
				<td md-cell>
					<h3 class="md-body-2" am-time-ago="payment.ts*1000"></h3>
					<md-tooltip>
						{{payment.ts*1000 | date:'HH:mm:ss dd/MM/yy'}}
					</md-tooltip>
				</td>
				<td md-cell><p class="md-body-2">{{payment.pt}}</p></td>
				<td md-cell><p class="md-body-2">{{payment.amount | toXMR }} XMR</p></td>
				<td md-cell ng-bind-html="payment.txnHash | hashToLink: 'tx'"></td>
				<td md-cell><p class="md-body-2">{{payment.mixin}}</p></td>
			  </tr>
			</tbody>
		  </table>
		</md-table-container>
		<md-table-pagination md-limit="options.limit" md-limit-options="[10, 20, 30]" md-page="options.page" md-total="{{miner.txnCount}}" md-on-paginate="loadPayments" md-page-select></md-table-pagination>
    </md-dialog-content>

    <md-dialog-actions layout="row">
      <span flex></span>
      <md-button ng-click="answer('close')">
      	Close
      </md-button>
    </md-dialog-actions>
  </form>
</md-dialog>
